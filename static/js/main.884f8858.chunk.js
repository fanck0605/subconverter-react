(this["webpackJsonpsubconverter-react"]=this["webpackJsonpsubconverter-react"]||[]).push([[0],{121:function(e,t,n){},208:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(24),l=n.n(c),s=(n(121),n(209),n(114)),u=(n(96),n(59)),o=(n(126),n(113)),i=n(42),b=(n(128),n(94)),j=(n(132),n(62)),d=(n(210),n(29)),f=(n(136),n(83)),p=(n(110),n(37)),O=n(48),h=n(60),v=n.n(h),m=n(93),x={clash:"Clash",clashr:"ClashR",quan:"Quantumult",quanx:"QuantumultX",loon:"Loon",ss:"SS (SIP002)",sssub:"SS Android",ssd:"SSD",ssr:"SSR",surfboard:"Surfboard","surge&ver=2":"Surge2","surge&ver=3":"Surge3","surge&ver=4":"Surge4",v2ray:"V2Ray"},g=function(){var e=Object(m.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/rule-list.json");case 2:return t=e.sent,e.next=5,t.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=Object(m.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/backend.json");case 2:return t=e.sent,e.next=5,t.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(r.useState)([]),t=Object(O.a)(e,2),n=t[0],a=t[1];return Object(r.useEffect)((function(){var e=!1,t=[{value:window.location.origin+"/sub"}];return a(t),U().then((function(n){e||a(t.concat(n))})),function(){e=!0}}),[]),n},S=function(){var e=Object(r.useState)([]),t=Object(O.a)(e,2),n=t[0],a=t[1];return Object(r.useEffect)((function(){var e=!1;return g().then((function(t){e||a(t)})),function(){e=!0}}),[]),n},w=function(e){var t,n=new URL(e),r=n.searchParams,a={backendUrl:"".concat(n.origin).concat(n.pathname)},c=function(e){var t=e.get("target");if(!t)return null;if(!x.hasOwnProperty(t)){var n=e.get("ver");if(!n)return null;if(t="".concat(t,"&ver=").concat(n),!x.hasOwnProperty(t))return null}return t}(r);c&&(a.targetType=c);var l=null===(t=r.get("url"))||void 0===t?void 0:t.replaceAll("|","\n");l&&(a.sourceUrls=l);var s=r.get("config");s&&(a.ruleUrl=s);var u=r.get("filename");u&&(a.filename=u);var o=r.get("udp");return"true"!==o&&"false"!==o||(a.enableUdp=o),a},y=n(213),k=n(214),I=n(61),F=n.n(I),_=n(13),B={labelCol:{xs:{span:5},sm:{span:5},md:{span:4}},wrapperCol:{xs:{span:17},sm:{span:17},md:{span:18}}},P={wrapperCol:{span:24}},V=function(e,t){return!!t&&(t.label?-1!==t.label.toUpperCase().indexOf(e.toUpperCase()):-1!==t.value.indexOf(e))},N=function(e,t){var n=Object(O.a)(e,2),r=n[0],a=n[1];return Object(_.jsx)(p.a.Option,{value:r,children:a},t)},T=function(){f.b.warning("\u656c\u8bf7\u671f\u5f85")},q=function(e){console.debug("Subconverter render");var t=d.a.useForm(),n=Object(O.a)(t,1)[0],a=d.a.useForm(),c=Object(O.a)(a,1)[0],l=C(),f=S();Object(r.useEffect)((function(){l[0]&&!n.getFieldValue("backendUrl")&&n.setFieldsValue({backendUrl:l[0].value})}),[n,l]),Object(r.useEffect)((function(){f[0]&&!n.getFieldValue("ruleUrl")&&n.setFieldsValue({ruleUrl:f[0].value})}),[n,f]);var h=Object(r.useMemo)((function(){var e,t,n={targetType:"clash"},r=null===(e=l[0])||void 0===e?void 0:e.value;r&&(n.backendUrl=r);var a=null===(t=f[0])||void 0===t?void 0:t.value;return a&&(n.ruleUrl=a),n}),[l,f]),v=Object(r.useCallback)((function(){n.validateFields().then((function(e){var t=function(e){var t=e.backendUrl,n=e.targetType,r=e.sourceUrls,a=e.ruleUrl,c=e.filename,l=e.enableUdp,s=encodeURIComponent(r.split(/[\n|]/).map((function(e){return e.trim()})).filter((function(e){return e})).join("|")),u=encodeURIComponent(a),o="".concat(t,"?target=").concat(n,"&url=").concat(s,"&config=").concat(u);return c&&(o+="&filename=".concat(c)),l&&(o+="&udp=".concat(l)),o}(e);c.setFieldsValue({subscriptionUrl:t})})).catch((function(){return console.error("\u8ba2\u9605\u94fe\u63a5\u751f\u6210\u9519\u8bef\uff01")}))}),[n,c]),m=Object(r.useCallback)((function(e){var t=e.target.value;try{var r=w(t);n.setFieldsValue(r)}catch(a){console.error("\u9519\u8bef\u7684\u8ba2\u9605\u94fe\u63a5\uff01")}}),[n]);return Object(_.jsxs)(s.a,Object(i.a)(Object(i.a)({},e),{},{title:"Subscription Converter",extra:Object(_.jsx)("a",{href:"https://github.com/fanck0605/subconverter-react",className:F.a.githubHref,children:Object(_.jsx)(y.a,{})}),children:[Object(_.jsxs)(d.a,Object(i.a)(Object(i.a)({},B),{},{form:n,initialValues:h,children:[Object(_.jsx)(d.a.Item,{label:"\u8ba2\u9605\u94fe\u63a5",name:"sourceUrls",rules:[{required:!0,message:"\u8ba2\u9605\u94fe\u63a5\u4e0d\u53ef\u4e3a\u7a7a"}],children:Object(_.jsx)(j.a.TextArea,{placeholder:"\u8bf7\u8f93\u5165\u8ba2\u9605\u94fe\u63a5\u5730\u5740",rows:3,allowClear:!0})}),Object(_.jsx)(d.a.Item,{label:"\u76ee\u6807\u7c7b\u578b",name:"targetType",rules:[{required:!0,message:"\u76ee\u6807\u7c7b\u578b\u4e0d\u53ef\u4e3a\u7a7a"}],children:Object(_.jsx)(p.a,{children:Object.entries(x).map(N)})}),Object(_.jsx)(d.a.Item,{label:"\u540e\u7aef\u5730\u5740",name:"backendUrl",rules:[{required:!0,message:"\u540e\u7aef\u5730\u5740\u4e0d\u53ef\u4e3a\u7a7a"}],children:Object(_.jsx)(b.a,{placeholder:"\u8bf7\u8f93\u5165\u540e\u7aef\u670d\u52a1\u5668\u5730\u5740",options:l,allowClear:!0,filterOption:V})}),Object(_.jsx)(d.a.Item,{label:"\u89c4\u5219\u5730\u5740",name:"ruleUrl",rules:[{required:!0,message:"\u89c4\u5219\u5730\u5740\u4e0d\u53ef\u4e3a\u7a7a"}],children:Object(_.jsx)(b.a,{placeholder:"\u8bf7\u8f93\u5165\u8fdc\u7a0b\u89c4\u5219\u5730\u5740",options:f,allowClear:!0,filterOption:V})}),Object(_.jsx)(d.a.Item,{label:"\u6587\u4ef6\u540d\u79f0",name:"filename",children:Object(_.jsx)(j.a,{placeholder:"\u8bf7\u8f93\u5165\u6587\u4ef6\u540d\u79f0",allowClear:!0})}),Object(_.jsx)(d.a.Item,{label:"\u542f\u7528 UDP",name:"enableUdp",children:Object(_.jsxs)(p.a,{placeholder:"\u8bf7\u9009\u62e9\u662f\u5426\u542f\u7528 UDP",allowClear:!0,children:[Object(_.jsx)(p.a.Option,{value:"true",children:"\u5f00\u542f"}),Object(_.jsx)(p.a.Option,{value:"false",children:"\u5173\u95ed"})]})})]})),Object(_.jsx)(o.a,{children:Object(_.jsx)(k.a,{})}),Object(_.jsxs)(d.a,Object(i.a)(Object(i.a)({},B),{},{form:c,children:[Object(_.jsx)(d.a.Item,{label:"\u8ba2\u9605\u94fe\u63a5",name:"subscriptionUrl",children:Object(_.jsx)(j.a,{onChange:m})}),Object(_.jsx)(d.a.Item,{label:"\u8ba2\u9605\u77ed\u94fe",name:"shortSubscriptionUrl",children:Object(_.jsx)(j.a,{})})]})),Object(_.jsx)(d.a,Object(i.a)(Object(i.a)({},P),{},{children:Object(_.jsx)(d.a.Item,{children:Object(_.jsxs)("div",{className:F.a.tailButtonContainer,children:[Object(_.jsx)(u.a,{className:F.a.tailButton,type:"primary",onClick:v,children:"\u751f\u6210\u94fe\u63a5"}),Object(_.jsx)(u.a,{className:F.a.tailButton,type:"primary",onClick:T,children:"\u751f\u6210\u77ed\u94fe"})]})})}))]}))},A=n(95),R=n.n(A),E=function(){return Object(_.jsx)("div",{className:R.a.container,children:Object(_.jsx)(q,{className:R.a.card})})},D=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,215)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,l=t.getTTFB;n(e),r(e),a(e),c(e),l(e)}))};l.a.render(Object(_.jsx)(a.a.StrictMode,{children:Object(_.jsx)(E,{})}),document.getElementById("root")),D()},61:function(e,t,n){e.exports={tailButtonContainer:"Subconverter_tailButtonContainer__3Y-7m",tailButton:"Subconverter_tailButton__2SN0A"}},95:function(e,t,n){e.exports={container:"App_container__2ey_y",card:"App_card__2aWZs"}}},[[208,1,2]]]);
//# sourceMappingURL=main.884f8858.chunk.js.map